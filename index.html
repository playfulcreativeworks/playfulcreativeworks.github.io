<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Classroom Behavior Tracking Suite</title>
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap");
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Poppins", sans-serif;
    }
    
    body {
      min-height: 100vh;
      width: 100%;
      background: #f5f5f5;
      transition: all 0.5s ease;
    }
    
    /* Sidebar Styles */
    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      height: 100%;
      width: 78px;
      backdrop-filter: blur(12px);
      background: rgba(30, 30, 30, 0.7);
      padding: 6px 14px;
      transition: all 0.5s ease;
      z-index: 100;
    }
    
    .sidebar.active {
      width: 240px;
    }
    
    #btn {
      position: absolute;
      color: #fff;
      left: 50%;
      top: 20px;
      font-size: 24px;
      height: 40px;
      width: 40px;
      border-radius: 50%;
      text-align: center;
      line-height: 40px;
      transform: translateX(-50%);
      cursor: pointer;
      transition: background 0.3s;
    }
    
    #btn:hover {
      background: rgba(255, 255, 255, 0.1);
    }
    
    .sidebar ul {
      margin-top: 80px;
    }
    
    .sidebar ul li {
      position: relative;
      height: 50px;
      list-style: none;
      margin: 0 5px;
    }
    
    .sidebar ul li a {
      display: flex;
      align-items: center;
      height: 100%;
      text-decoration: none;
      color: #fff;
      border-radius: 12px;
      padding-left: 15px;
      transition: all 0.3s ease;
      font-size: 18px;
      white-space: nowrap;
      cursor: pointer;
    }
    
    .sidebar ul li a:hover {
      background: rgba(255, 255, 255, 0.1);
    }
    
    .sidebar ul li a.active {
      background: rgba(255, 255, 255, 0.2);
    }
    
    .links_name {
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }
    
    .sidebar.active .links_name {
      opacity: 1;
      pointer-events: auto;
    }
    
    /* Content Area */
    .home_content {
      position: absolute;
      height: 100%;
      width: calc(100% - 78px);
      left: 78px;
      transition: all 0.5s ease;
      overflow-y: auto;
      background: #ffffff;
    }
    
    .sidebar.active ~ .home_content {
      width: calc(100% - 240px);
      left: 240px;
    }
    
    .content-section {
      display: none;
      min-height: 100vh;
    }
    
    .content-section.active {
      display: block;
    }
    
    /* Behavior Meter Styles */
    .behavior-meter {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
      background: #ffffff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: #374151;
      padding: 20px;
      transition: background-color 1s ease;
    }

    .meter-container {
      background: #ffffff;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      padding: 40px;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      text-align: center;
      max-width: 500px;
      width: 100%;
      color: #374151;
    }

    .meter-container h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
      color: #1f2937;
      font-weight: 700;
      letter-spacing: -0.025em;
    }

    .meter-container .subtitle {
      font-size: 1.1em;
      color: #6b7280;
      margin-bottom: 30px;
      font-weight: 400;
    }

    .emoji-display {
      font-size: 6em;
      margin: 20px 0;
      transition: transform 0.3s ease;
      display: inline-block;
    }

    .emoji-display:hover {
      transform: scale(1.1);
    }

    #meter-container {
      margin: 30px 0;
      position: relative;
    }

    #meter {
      width: 100%;
      height: 60px;
      background: #f3f4f6;
      border-radius: 6px;
      position: relative;
      border: 2px solid #e5e7eb;
      display: flex;
      overflow: hidden;
      margin: 25px 0;
    }

    .segment {
      flex: 1;
      height: 100%;
      background: #f3f4f6;
      border-right: 3px solid #ffffff;
      transition: background-color 0.6s ease, transform 0.2s ease;
      position: relative;
      cursor: pointer;
    }

    .segment:hover {
      transform: scaleY(1.1);
      opacity: 0.8;
    }

    .segment:last-child {
      border-right: none;
    }

    .segment.filled-red { background: #ef4444; }
    .segment.filled-orange { background: #f59e0b; }
    .segment.filled-gray { background: #6b7280; }
    .segment.filled-blue { background: #3b82f6; }
    .segment.filled-green { background: #10b981; }

    .meter-labels {
      display: flex;
      justify-content: space-between;
      margin-top: clamp(10px, 2vw, 15px);
      font-size: clamp(0.9rem, 1.8vw, 1.1rem);
      color: #6b7280;
      font-weight: 500;
    }

    .reset-btn {
      background: #f3f4f6;
      color: #374151;
      margin-top: 24px;
      font-size: 1em;
      padding: 12px 28px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
    }

    .reset-btn:hover {
      background: #e5e7eb;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .level-text {
      font-size: 1.4em;
      margin: 15px 0;
      font-weight: 600;
      color: #1f2937;
    }

    .level-display {
      background: #f3f4f6;
      color: #374151;
      border: 1px solid #e5e7eb;
      padding: 12px 24px;
      border-radius: 4px;
      font-size: 1.1em;
      font-weight: 600;
      margin: 15px 0;
    }

    .celebration {
      position: fixed;
      pointer-events: none;
      font-size: 2em;
      animation: celebrate 2s ease-out forwards;
    }

    @keyframes celebrate {
      0% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
      100% {
        opacity: 0;
        transform: translateY(-100px) scale(1.5);
      }
    }
    
    /* Weekly Tracker Styles */
    .weekly-tracker {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
      background: #ffffff;
      min-height: 100vh;
      padding: 20px;
      color: #374151;
    }

    .tracker-container {
      max-width: 1200px;
      margin: 0 auto;
      background: #ffffff;
      border: 1px solid #e5e7eb;
      border-radius: 16px;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }

    .header {
      background: #1f2937;
      color: white;
      padding: 24px;
      text-align: center;
    }

    .header h1 {
      font-size: 2.2em;
      font-weight: 700;
      margin-bottom: 8px;
      letter-spacing: -0.025em;
    }

    .header p {
      font-size: 1.1em;
      opacity: 0.9;
      font-weight: 400;
    }

    .controls {
      padding: 20px 24px;
      border-bottom: 1px solid #e5e7eb;
      display: flex;
      gap: 15px;
      align-items: center;
      flex-wrap: wrap;
    }

    .mode-toggle {
      display: flex;
      background: #f3f4f6;
      border-radius: 8px;
      padding: 4px;
    }

    .mode-btn {
      padding: 8px 16px;
      border: none;
      background: transparent;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.2s ease;
      font-size: 0.9em;
    }

    .mode-btn.active {
      background: white;
      color: #667eea;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .add-student {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .add-student input {
      padding: 8px 12px;
      border: 1px solid #d1d5db;
      border-radius: 12px;
      font-size: 0.9em;
      min-width: 150px;
      font-family: inherit;
    }

    .add-student input:focus {
      outline: none;
      border-color: #1f2937;
      box-shadow: 0 0 0 3px rgba(31, 41, 55, 0.1);
    }

    .add-student button {
      padding: 8px 16px;
      background: #10b981;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9em;
      font-weight: 500;
      transition: background 0.2s ease;
    }

    .add-student button:hover {
      background: #059669;
    }

    .table-container {
      padding: 24px;
      overflow-x: auto;
    }

    .behavior-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.95em;
    }

    .behavior-table th {
      background: #f8fafc;
      padding: 12px 8px;
      text-align: left;
      font-weight: 600;
      color: #374151;
      border-bottom: 2px solid #e5e7eb;
    }

    .behavior-table th:first-child {
      min-width: 200px;
      text-align: left;
    }

    .behavior-table th.day-header {
      text-align: center;
      min-width: 80px;
    }

    .behavior-table td {
      padding: 12px 8px;
      border-bottom: 1px solid #f3f4f6;
      vertical-align: middle;
    }

    .behavior-table tr:hover {
      background: #f9fafb;
    }

    .student-name {
      font-weight: 500;
      color: #1f2937;
    }

    .behavior-metric {
      color: #6b7280;
      font-size: 0.9em;
      margin-left: 8px;
    }

    .day-cell {
      text-align: center;
      cursor: pointer;
      position: relative;
      min-width: 60px;
    }

    .status-indicator {
      display: inline-block;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      border: 2px solid #d1d5db;
      background: white;
      transition: all 0.2s ease;
      position: relative;
    }

    .status-indicator.check {
      background: #10b981;
      border-color: #10b981;
    }

    .status-indicator.check::after {
      content: '‚úì';
      color: white;
      font-weight: bold;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 14px;
    }

    .status-indicator.x {
      background: #ef4444;
      border-color: #ef4444;
    }

    .status-indicator.x::after {
      content: '‚úó';
      color: white;
      font-weight: bold;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 14px;
    }

    .status-indicator:hover {
      transform: scale(1.1);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .metrics {
      margin-bottom: 20px;
    }

    .metrics h3 {
      font-size: 1.1em;
      color: #374151;
      margin-bottom: 12px;
    }

    .metric-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .metric-tag {
      background: #e0e7ff;
      color: #3730a3;
      padding: 6px 12px;
      border-radius: 16px;
      font-size: 0.8em;
      font-weight: 500;
    }

    .week-summary {
      margin-top: 24px;
      padding: 16px;
      background: #f8fafc;
      border-radius: 8px;
    }

    .summary-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 16px;
      margin-top: 12px;
    }

    .stat-card {
      background: white;
      padding: 12px;
      border-radius: 8px;
      text-align: center;
      border: 1px solid #e5e7eb;
    }

    .stat-number {
      font-size: 1.4em;
      font-weight: 600;
      color: #1f2937;
    }

    .stat-label {
      font-size: 0.8em;
      color: #6b7280;
      margin-top: 4px;
    }

    .save-load-controls {
      display: flex;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
    }

    .save-btn, .load-btn {
      padding: 8px 16px;
      border: 1px solid #d1d5db;
      background: white;
      color: #374151;
      border-radius: 12px;
      cursor: pointer;
      font-size: 0.9em;
      font-weight: 500;
      transition: all 0.2s ease;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    }

    .save-btn:hover, .load-btn:hover {
      background: #f9fafb;
      border-color: #9ca3af;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .file-input {
      display: none;
    }

    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    @keyframes slideOut {
      from { transform: translateX(0); opacity: 1; }
      to { transform: translateX(100%); opacity: 0; }
    }

    @media (max-width: 768px) {
      .controls {
        flex-direction: column;
        align-items: stretch;
      }
      
      .mode-toggle {
        align-self: center;
      }
      
      .table-container {
        padding: 12px;
      }
      
      .behavior-table th,
      .behavior-table td {
        padding: 8px 4px;
        font-size: 0.9em;
      }
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <i class="bx bx-menu" id="btn"></i>
    <ul class="nav_list">
      <li>
        <a href="#" onclick="showSection('behavior-meter')" class="nav-link active">
          <span class="links_name">üìä Behavior Meter</span>
        </a>
      </li>
      <li>
        <a href="#" onclick="showSection('weekly-tracker')" class="nav-link">
          <span class="links_name">üìÖ Weekly Tracker</span>
        </a>
      </li>
    </ul>
  </div>
  
  <div class="home_content">
    <!-- Behavior Meter Section -->
    <div id="behavior-meter" class="content-section active">
      <div class="behavior-meter">
        <div class="meter-container">
          <h1>Behavior Meter</h1>
          <p class="subtitle">Let's track our awesome behavior!</p>
          
          <div id="meter-container">
            <div id="meter">
              <div class="segment"></div>
              <div class="segment"></div>
              <div class="segment"></div>
              <div class="segment"></div>
              <div class="segment"></div>
              <div class="segment"></div>
              <div class="segment"></div>
              <div class="segment"></div>
              <div class="segment"></div>
              <div class="segment"></div>
            </div>
            <div class="meter-labels">
              <span>üòî Needs Work</span>
              <span>üôÇ Good</span>
              <span>üåü Amazing!</span>
            </div>
            <p style="font-size: 0.9em; color: #6b7280; margin-top: 8px; font-style: italic;">
              üí° Click on the meter above to set the behavior level
            </p>
          </div>
          
          <div style="margin: 20px 0; width: 100%; padding: 0 8px;">
            <input type="range" id="behaviorSlider" min="0" max="100" value="50" 
                   style="width: 100%; height: 6px; border-radius: 3px; background: linear-gradient(to right, #e5e7eb 0%, #e5e7eb 100%); outline: none; -webkit-appearance: none; cursor: pointer;">
            <div style="display: flex; justify-content: space-between; font-size: 0.75em; color: #9ca3af; margin-top: 8px; font-weight: 500;">
              <span>0</span>
              <span>25</span>
              <span>50</span>
              <span>75</span>
              <span>100</span>
            </div>
          </div>
          
          <div class="emoji-display" id="emoji">üòê</div>
          
          <div class="level-text" id="levelText">Doing Okay</div>
          
          <div class="level-display" id="levelDisplay">Level 5</div>
          
          <button class="reset-btn" onclick="resetMeter()">üîÑ New Day</button>
        </div>
      </div>
    </div>

    <!-- Weekly Tracker Section -->
    <div id="weekly-tracker" class="content-section">
      <div class="weekly-tracker">
        <div class="tracker-container">
          <div class="header">
            <h1>Weekly Behavior Tracker</h1>
            <p>Track positive classroom behaviors throughout the week</p>
          </div>

          <div class="controls">
            <div class="mode-toggle">
              <button class="mode-btn active" onclick="setMode('class')">Whole Class</button>
              <button class="mode-btn" onclick="setMode('individual')">Individual Students</button>
            </div>

            <div class="add-student" id="studentControls" style="display: none;">
              <input type="text" id="studentName" placeholder="Enter student name" maxlength="30">
              <button onclick="addStudent()">Add Student</button>
            </div>

            <div class="save-load-controls">
              <button class="save-btn" onclick="saveData()">üíæ Save Week</button>
              <button class="load-btn" onclick="document.getElementById('fileInput').click()">üìÅ Load Week</button>
              <input type="file" id="fileInput" class="file-input" accept=".json" onchange="loadData(event)">
            </div>

            <button class="reset-btn" onclick="resetWeek()">üîÑ Reset Week</button>
          </div>

          <div class="table-container">
            <div class="metrics">
              <h3>Behavior Goals This Week:</h3>
              <div class="metric-tags">
                <span class="metric-tag">Walking quietly in hallways</span>
                <span class="metric-tag">Cleaning up classroom</span>
                <span class="metric-tag">Using inside voices</span>
                <span class="metric-tag">Following directions</span>
                <span class="metric-tag">Being respectful to others</span>
                <span class="metric-tag">Staying on task</span>
                <span class="metric-tag">Helping classmates</span>
              </div>
            </div>

            <table class="behavior-table" id="behaviorTable">
              <thead>
                <tr>
                  <th>Student/Class</th>
                  <th class="day-header">Mon</th>
                  <th class="day-header">Tue</th>
                  <th class="day-header">Wed</th>
                  <th class="day-header">Thu</th>
                  <th class="day-header">Fri</th>
                </tr>
              </thead>
              <tbody id="tableBody">
                <tr data-student="class">
                  <td>
                    <span class="student-name">Whole Class</span>
                    <div class="behavior-metric">Meeting daily behavior goals</div>
                  </td>
                  <td class="day-cell" onclick="toggleStatus('class', 0)">
                    <div class="status-indicator" data-status="empty"></div>
                  </td>
                  <td class="day-cell" onclick="toggleStatus('class', 1)">
                    <div class="status-indicator" data-status="empty"></div>
                  </td>
                  <td class="day-cell" onclick="toggleStatus('class', 2)">
                    <div class="status-indicator" data-status="empty"></div>
                  </td>
                  <td class="day-cell" onclick="toggleStatus('class', 3)">
                    <div class="status-indicator" data-status="empty"></div>
                  </td>
                  <td class="day-cell" onclick="toggleStatus('class', 4)">
                    <div class="status-indicator" data-status="empty"></div>
                  </td>
                </tr>
              </tbody>
            </table>

            <div class="week-summary">
              <h3>Week Summary</h3>
              <div class="summary-stats" id="summaryStats">
                <div class="stat-card">
                  <div class="stat-number" id="checksCount">0</div>
                  <div class="stat-label">Total Checks ‚úì</div>
                </div>
                <div class="stat-card">
                  <div class="stat-number" id="xCount">0</div>
                  <div class="stat-label">Total X's ‚úó</div>
                </div>
                <div class="stat-card">
                  <div class="stat-number" id="successRate">0%</div>
                  <div class="stat-label">Success Rate</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Sidebar functionality
    let btn = document.querySelector("#btn");
    let sidebar = document.querySelector(".sidebar");
    btn.onclick = function() {
      sidebar.classList.toggle("active");
    }

    // Navigation functionality
    function showSection(sectionId) {
      // Hide all sections
      document.querySelectorAll('.content-section').forEach(section => {
        section.classList.remove('active');
      });
      
      // Show selected section
      document.getElementById(sectionId).classList.add('active');
      
      // Update nav links
      document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('active');
      });
      event.target.closest('.nav-link').classList.add('active');
    }

    // Behavior Meter functionality
    let behaviorLevel = 50;
    const emoji = document.getElementById("emoji");
    const levelText = document.getElementById("levelText");
    const levelDisplay = document.getElementById("levelDisplay");

    const behaviorStages = [
      { min: 0, max: 20, emoji: "üòî", text: "Needs Improvement", color: "#ef4444", bgColor: "#f58a8a" },
      { min: 21, max: 40, emoji: "üòï", text: "Could Be Better", color: "#f59e0b", bgColor: "#f8bb54" },
      { min: 41, max: 60, emoji: "üòê", text: "Doing Okay", color: "#6b7280", bgColor: "#9399a5" },
      { min: 61, max: 80, emoji: "üôÇ", text: "Good Job!", color: "#3b82f6", bgColor: "#84b1f9" },
      { min: 81, max: 100, emoji: "üåü", text: "Amazing Work!", color: "#10b981", bgColor: "#29ecac" }
    ];

    function getCurrentStage() {
      return behaviorStages.find(stage => 
        behaviorLevel >= stage.min && behaviorLevel <= stage.max
      );
    }

    function updateDisplay() {
      const currentStage = getCurrentStage();
      const behaviorMeterSection = document.querySelector('.behavior-meter');
      
      behaviorMeterSection.style.backgroundColor = currentStage.bgColor;
      
      emoji.textContent = currentStage.emoji;
      levelText.textContent = currentStage.text;
      levelDisplay.textContent = `Level ${Math.ceil(behaviorLevel / 10)}`;
      
      const segments = document.querySelectorAll('.segment');
      const filledSegments = Math.floor((behaviorLevel / 100) * 10);
      
      segments.forEach((segment, index) => {
        segment.className = 'segment';
        if (index < filledSegments) {
          if (index < 2) {
            segment.classList.add('filled-red');
          } else if (index < 4) {
            segment.classList.add('filled-orange');
          } else if (index < 6) {
            segment.classList.add('filled-gray');
          } else if (index < 8) {
            segment.classList.add('filled-blue');
          } else {
            segment.classList.add('filled-green');
          }
        }
      });
      
      if (behaviorLevel >= 81) {
        createCelebration();
      }
    }

    function resetMeter() {
      behaviorLevel = 50;
      updateDisplay();
      document.getElementById('behaviorSlider').value = behaviorLevel;
    }

    function createCelebration() {
      if (Math.random() > 0.7) {
        const celebration = document.createElement('div');
        celebration.className = 'celebration';
        celebration.textContent = ['üéâ', '‚≠ê', 'üåü', '‚ú®', 'üéä'][Math.floor(Math.random() * 5)];
        celebration.style.left = Math.random() * window.innerWidth + 'px';
        celebration.style.top = Math.random() * window.innerHeight + 'px';
        document.body.appendChild(celebration);
        
        setTimeout(() => {
          celebration.remove();
        }, 2000);
      }
    }

    // Segment click functionality
    document.querySelectorAll('.segment').forEach((segment, index) => {
      segment.addEventListener('click', function() {
        behaviorLevel = (index + 1) * 10;
        updateDisplay();
        document.getElementById('behaviorSlider').value = behaviorLevel;
      });
    });

    // Slider functionality
    document.getElementById('behaviorSlider').addEventListener('input', function(e) {
      behaviorLevel = parseInt(e.target.value);
      updateDisplay();
    });

    // Keyboard shortcuts for behavior meter
    document.addEventListener('keydown', function(event) {
      if (document.getElementById('behavior-meter').classList.contains('active')) {
        switch(event.key) {
          case '+':
          case '=':
            behaviorLevel = Math.min(100, behaviorLevel + 5);
            updateDisplay();
            document.getElementById('behaviorSlider').value = behaviorLevel;
            break;
          case '-':
            behaviorLevel = Math.max(0, behaviorLevel - 5);
            updateDisplay();
            document.getElementById('behaviorSlider').value = behaviorLevel;
            break;
          case ' ':
            event.preventDefault();
            resetMeter();
            break;
        }
      }
    });

    // Weekly Tracker functionality
    let currentMode = 'class';
    let students = ['class'];
    let behaviorData = {};

    function setMode(mode) {
      currentMode = mode;
      setModeUI(mode);
      
      if (mode === 'class') {
        students = ['class'];
        renderTable();
      }
    }

    function resetWeek() {
      if (confirm('Are you sure you want to reset all data for this week?')) {
        behaviorData = {};
        document.querySelectorAll('.status-indicator').forEach(indicator => {
          indicator.setAttribute('data-status', 'empty');
          indicator.className = 'status-indicator';
        });
        updateSummary();
      }
    }

    function addStudent() {
      const nameInput = document.getElementById('studentName');
      const name = nameInput.value.trim();
      
      if (name && !students.includes(name)) {
        students.push(name);
        renderTable();
        nameInput.value = '';
        updateSummary();
      }
    }

    function renderTable() {
      const tableBody = document.getElementById('tableBody');
      tableBody.innerHTML = '';
      
      students.forEach(student => {
        const row = document.createElement('tr');
        row.setAttribute('data-student', student);
        
        const isClass = student === 'class';
        const displayName = isClass ? 'Whole Class' : student;
        const description = isClass ? 'Meeting daily behavior goals' : 'Individual behavior tracking';
        
        row.innerHTML = `
          <td>
            <span class="student-name">${displayName}</span>
            <div class="behavior-metric">${description}</div>
          </td>
          ${[0,1,2,3,4].map(day => `
            <td class="day-cell" onclick="toggleStatus('${student}', ${day})">
              <div class="status-indicator" data-status="empty"></div>
            </td>
          `).join('')}
        `;
        
        tableBody.appendChild(row);
      });
      
      restoreData();
    }

    function toggleStatus(student, day) {
      const row = document.querySelector(`[data-student="${student}"]`);
      const indicator = row.querySelectorAll('.status-indicator')[day];
      const currentStatus = indicator.getAttribute('data-status');
      
      let newStatus;
      if (currentStatus === 'empty') {
        newStatus = 'check';
      } else if (currentStatus === 'check') {
        newStatus = 'x';
      } else {
        newStatus = 'empty';
      }
      
      indicator.setAttribute('data-status', newStatus);
      indicator.className = `status-indicator ${newStatus === 'empty' ? '' : newStatus}`;
      
      if (!behaviorData[student]) {
        behaviorData[student] = {};
      }
      behaviorData[student][day] = newStatus;
      
      updateSummary();
    }

    function restoreData() {
      Object.keys(behaviorData).forEach(student => {
        const row = document.querySelector(`[data-student="${student}"]`);
        if (row) {
          Object.keys(behaviorData[student]).forEach(day => {
            const indicator = row.querySelectorAll('.status-indicator')[day];
            const status = behaviorData[student][day];
            indicator.setAttribute('data-status', status);
            indicator.className = `status-indicator ${status === 'empty' ? '' : status}`;
          });
        }
      });
      updateSummary();
    }

    function updateSummary() {
      let totalChecks = 0;
      let totalX = 0;
      
      Object.values(behaviorData).forEach(studentData => {
        Object.values(studentData).forEach(status => {
          if (status === 'check') totalChecks++;
          if (status === 'x') totalX++;
        });
      });
      
      const total = totalChecks + totalX;
      const successRate = total > 0 ? Math.round((totalChecks / total) * 100) : 0;
      
      document.getElementById('checksCount').textContent = totalChecks;
      document.getElementById('xCount').textContent = totalX;
      document.getElementById('successRate').textContent = successRate + '%';
    }

    function saveData() {
      const saveData = {
        students: students,
        behaviorData: behaviorData,
        currentMode: currentMode,
        timestamp: new Date().toISOString(),
        weekOf: getWeekOfDate()
      };
      
      const dataStr = JSON.stringify(saveData, null, 2);
      const dataBlob = new Blob([dataStr], {type: 'application/json'});
      
      const link = document.createElement('a');
      link.href = URL.createObjectURL(dataBlob);
      link.download = `behavior-tracker-${getWeekOfDate()}.json`;
      link.click();
      
      showMessage('Week data saved! File downloaded to your computer.', 'success');
    }

    function loadData(event) {
      const file = event.target.files[0];
      if (!file) return;
      
      const reader = new FileReader();
      reader.onload = function(e) {
        try {
          const loadedData = JSON.parse(e.target.result);
          
          if (loadedData.students && loadedData.behaviorData) {
            students = loadedData.students;
            behaviorData = loadedData.behaviorData;
            currentMode = loadedData.currentMode || 'class';
            
            setModeUI(currentMode);
            renderTable();
            updateSummary();
            
            showMessage(`Week data loaded successfully! (Week of ${loadedData.weekOf || 'Unknown'})`, 'success');
          } else {
            throw new Error('Invalid file format');
          }
        } catch (error) {
          showMessage('Error loading file. Please make sure it\'s a valid behavior tracker file.', 'error');
        }
      };
      reader.readAsText(file);
      
      event.target.value = '';
    }

    function getWeekOfDate() {
      const now = new Date();
      const monday = new Date(now);
      monday.setDate(now.getDate() - now.getDay() + 1);
      return monday.toISOString().split('T')[0];
    }

    function showMessage(text, type) {
      const message = document.createElement('div');
      message.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 12px 20px;
        border-radius: 12px;
        color: white;
        font-weight: 500;
        z-index: 1000;
        animation: slideIn 0.3s ease;
        max-width: 300px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      `;
      
      if (type === 'success') {
        message.style.background = '#10b981';
      } else {
        message.style.background = '#ef4444';
      }
      
      message.textContent = text;
      document.body.appendChild(message);
      
      setTimeout(() => {
        message.style.animation = 'slideOut 0.3s ease';
        setTimeout(() => {
          if (message.parentNode) {
            message.parentNode.removeChild(message);
          }
        }, 300);
      }, 3000);
    }

    function setModeUI(mode) {
      document.querySelectorAll('.mode-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.textContent.toLowerCase().includes(mode)) {
          btn.classList.add('active');
        }
      });
      
      const studentControls = document.getElementById('studentControls');
      if (mode === 'individual') {
        studentControls.style.display = 'flex';
      } else {
        studentControls.style.display = 'none';
      }
    }

    // Add Enter key support for adding students
    document.getElementById('studentName').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        addStudent();
      }
    });

    // Initialize both tools
    updateDisplay();
    renderTable();
    updateSummary();

    // Add custom slider styles
    const sliderStyles = document.createElement('style');
    sliderStyles.textContent = `
      #behaviorSlider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        height: 20px;
        width: 20px;
        border-radius: 50%;
        background: #ffffff;
        border: 1px solid #d1d5db;
        cursor: pointer;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        transition: all 0.15s ease;
      }

      #behaviorSlider::-webkit-slider-thumb:hover {
        transform: scale(1.1);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        border-color: #9ca3af;
      }

      #behaviorSlider::-webkit-slider-thumb:active {
        transform: scale(1.2);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        border-color: #6b7280;
      }

      #behaviorSlider::-moz-range-thumb {
        height: 20px;
        width: 20px;
        border-radius: 50%;
        background: #ffffff;
        border: 1px solid #d1d5db;
        cursor: pointer;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        transition: all 0.15s ease;
      }

      #behaviorSlider::-moz-range-thumb:hover {
        transform: scale(1.1);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        border-color: #9ca3af;
      }

      #behaviorSlider::-moz-range-track {
        height: 6px;
        border-radius: 3px;
        background: #e5e7eb;
      }

      #behaviorSlider:focus {
        outline: none;
      }

      #behaviorSlider:focus::-webkit-slider-thumb {
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1), 0 2px 4px rgba(0, 0, 0, 0.1);
      }
    `;
    document.head.appendChild(sliderStyles);
  </script>
</body>
</html>
